<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Explorando o Tsuru</title>

		<meta name="description" content="Apresentacao da palestra explorando o tsuru">
		<meta name="author" content="Elysson MR">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/night.css" id="theme">
		<link rel="stylesheet" href="css/main.css">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>
		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h1>Explorando o Tsuru</h1>
					<h3>Open Source Platform As A Service (PaaS)</h3>
					<img class="stretch" src="img/tsuru.png">
					<p>
						<small>by <a href="https://github.com/elyssonmr">Elysson MR</a> / <a href="http://twitter.com/elyssonmr">@elyssonmr</a></small>
					</p>
				</section>

				<section>
					<h2>Agenda</h2>
					<ul>
						<li>Introdução</li>
						<li>Conceitos</li>
						<li>O Tsuru</li>
						<li>Estudo de caso</li>
						<li>Como Contribuir com o Projeto do Tsuru</li>
						<li>Conclusão</li>
						<li>Referências</li>
					</ul>
				</section>
				<section>
					<h2>Introdução</h2>
					<ul>
						<li>Alguns Problemas Com as Entregas do Nosso Produto;</li>
						<li>Entregas de Software Constantes;</li>
						<li>Processo de Entrega Demorado;</li>
						<li>Economia de Recursos;</li>
						<li>Diversos Clientes com Personalizações;</li>
					</ul>
				</section>

				<section>
					<h2>Conceitos - PaaS</h2>
					<ul>
						<li>É um modelo para executar aplicações sem a preocupação de manter o hardware e a infraestrutura de software;</li>
						<li>O provedor entrega ferramentas de hardware e de software, geralmente necessárias para o desenvolvimento de aplicativos;</li>
						<li>As etapas do desenvolvimento de software passam a ser na nuvem (Desenvolvimento do código, compilação, debug, deploy e teste);</li>						
					</ul>
				</section>

				<section>
					<h2>Conceitos - PaaS</h2>
					<img class="stretch" src="img/PaaS.png"/>
					<p>Fonte: <a href="https://www.salesforce.com/paas/overview/">Sales Force</a></p>
				</section>

				<section>
					<h2>Conceitos - PaaS</h2>
					<ul>
						<li>O PaaS é vantajoso para poupar custos, não usar hardware desnecessário enquanto que ao mesmo tempo que é possível escalar os dados de forma simples;</li>
						<li>Exemplos: Heroku, GAE, force.com (sales force)</li>
					</ul>
				</section>

				<section>
					<h2>O Tsuru</h2>
					<img class="stretch" src="img/tsuru_icon.png">
				</section>

				<section>
					<h2>O Tsuru - O que é?</h2>
					<ul>
						<li>É um PaaS Open Source e extensivel;</li>
						<li>Faz com que o deploy das aplicações ocorra de forma rápida e fácil;</li>
						<li>Devido as suas funcionalidades o desenvolvedor só se preocupa com o desenvolvimento de seu aplicativo;</li>
						<li>Criado pelo Pessoal da globo.com (Brasilsilsilsil \o/);</li>
						<li>Feito em com a linguagem <a href="https://golang.org/">GO</a>;</li>
					</ul>
				</section>

				<section>
					<h2>O Tsuru - Caracteristicas</h2>
					<ul>
						<li>Rápido e fácil de criar um deploy continuo utilizando somente um "git push";</li>
						<li>Fácil de se criar o deploy de versões de teste e produção para a aplicação;</li>
						<li>Para escalar a aplicação basta adicionar uma "unidade" no Tsuru que ele toma conta do restante;</li>
						<li>O tsuru possí um conjunto de ferramentas que garantem que a aplicação sempre estará disponivel;</li>
					</ul>
				</section>

				<section>
					<h2>O Tsuru - Caracteristicas</h2>
					<ul>
						<li>Utiliza o Docker para empacotar, entregar e executar qualquer aplicação;</li>
						<li>A API do tsuru distribuí as aplicações entre os diversas Nodos (máquinas virtuais ou físicas);</li>
						<li>O tsuru possuí containers que tem tudo que é necessário para uma aplicação ser executada;</li>
						<li>Utiliza uma arquitetura de serviços para prover funcionalidades extras para as aplicações;</li>
					</ul>
				</section>

				<section>
					<h2>O Tsuru - Instalação</h2>
					<ul>
						<li>Existem 2 maneiras de Instalar:
							<ul>
								<li><a href="https://github.com/tsuru/now">Tsuru Now</a></li>
								<li>Instalação de todos os componentes na mão <u>para os fortes</u>;</li>
							</ul>
						</li>
					</ul>
				</section>

				<section>
					<h2>O Tsuru - Instalação</h2>
					<ul>
						<li>Primeiro é necessário efetuar uma pré configuração no gerenciador de pacotes do Sistema Operacional;</li>
					</ul>
					<pre>
						<code data-trim>
sudo apt-get update
sudo apt-get install curl python-software-properties
sudo apt-add-repository ppa:tsuru/ppa -y
sudo apt-get update
						</code>
					</pre>
				</section>

				<section>
					<h2>O Tsuru - Instalação</h2>
					<ul>
						<li>A primeira dependência é o <a href="http://gandalf.readthedocs.org/en/latest/">Gandalf</a>;</li>
						<li>REST api para gerenciamento de repositórios GIT, usuários e controle de acesso;</li>
						<li>Necessário para poder utilizar o "git push" para deploy;</li>
					</ul>
					<pre>
						<code data-trim>
sudo apt-get install gandalf-server
						</code>
					</pre>
				</section>
				
				<section>
					<h2>O Tsuru - Instalação</h2>
					<ul>
						<li>Instalação do próprio tsuru;</li>
						<li>Ele depende, além do Gandalf, do MongoDB e do Redis;</li>
					</ul>
					<pre>
						<code data-trim>
sudo apt-get install tsuru-server -qqy
						</code>
					</pre>
				</section>

				<section>
					<h2>O Tsuru - Instalação</h2>
					<ul>
						<li>A última depedência e etapa da instalação é o <a href="https://github.com/hipache/hipache/">Hipache</a>;</li>
						<li>O tsusu utiliza o Hipache para direcionar as as requisições para seus containers;</li>
						<li>Essas rotas são armazenadas no Redis;</li>
					</ul>
					<pre>
						<code data-trim>
sudo apt-get install tsuru-server -qqy
						</code>
					</pre>
				</section>

				<section>
					<h2>O Tsuru - Inicialização</h2>
					<ul>
						<li>Após a instalção é necessário adicionar pelo menos 1 nó;</li>
						<li>Primeiro o tsuru irá ler a configuração no arquivo de configuração em busca do provedor de IaaS para a criação dos nós, exemplo:</li>
					</ul>
					<pre>
						<code data-trim>
iaas:
  default: ec2
  node-protocol: http
  node-port: 2375
  ec2:
    key-id: xxxxxxxxxxx
    secret-key: yyyyyyyyyyyyy
						</code>
					</pre>
				</section>

				<section>
					<h2>O Tsuru - Inicialização</h2>
					<ul>
						<li>Para criar um nó basta utilizar o comando abaixo;</li>
					</ul>
					<pre>
						<code data-trim>
tsuru-admin docker-node-add iaas=ec2
						</code>
					</pre>
				</section>

				<section>
					<h2>O Tsuru - Criando um app</h2>
					<ul>
						<li>Para criar um app é necessário se logar no tsuru e utilizar o comando para criar o aplicativo;</li>
						<li>Durante a criação do aplicativo escolhemos qual o seu nome e plataforma;</li>
					</ul>
					<pre>
						<code data-trim>
tsuru user-create youremail@domain.com
tsuru login youremail@domain.com
tsuru app-create blog python
						</code>
					</pre>
				</section>

				<section>
					<h2>O Tsuru - Criando um app</h2>
					<ul>
						<li>Para Fazermos um deploy da aplicação precisamos saber qual o seu endereço GIT remoto;</li>
					</ul>
					<pre>
						<code data-trim>
tsuru app-info --app blog
Application: blog
Repository: git@git.tsuru.io:blog.git
Platform: python
Teams: tsuruteam
Address:
						</code>
					</pre>
				</section>
				
				<section>
					<h2>O Tsuru - Executando o aplicativo</h2>
					<ul>
						<li>Após o "git push" podemos verificar que o app já esta sendo executado;</li>
						<li>O tsuru irá procurar pelo arquivo chamado "Procfile" que contêm como executar a aplicação (conceito "emprestado" do <a href="http://theforeman.org/">Foreman</a>);</li>
					</ul>
					<pre>
						<code data-trim>
$ tsuru app-info
Application: blog
Repository: git@git.tsuru.io:blog.git
Platform: python
Teams: tsuruteam
Address: blog.cloud.tsuru.io
Units:
+--------------+---------+
| Unit         | State   |
+--------------+---------+
| 9e70748f4f25 | started |
+--------------+---------+
						</code>
					</pre>
				</section>

				<section>
					<h2>Estudo de Caso</h2>
					<ul>
						<li>Nosso Cenário hoje:
							<ul>
								<li>Equipe de desenvolvimento de apenas 4 integrantes para desenvolver 2 sistemas (3 plenos e 1 trainee);</li>
								<li>Um único software para diversos clientes;</li>
								<li>Cada cliente possuí algumas personalizações particulares no sistema;</li>
								<li>Os deploys são feitos manualmente;</li>
								<li>Devem ser feito testes nessas personalizações;</li>
								<li>Cada cliente possuí uma instância na Amazon;</li>
							</ul>
						</li>
					</ul>
				</section>

				<section>
					<h2>Estudo de Caso</h2>
					<ul>
						<li>Onde precisamos chegar:
							<ul>
								<li>Precisamos automatizar mais testes antes de cada deploy;</li>
								<li>Precisamos ter um deploy automático para todos os clientes;</li>
								<li>O sistema deve voltar para o ar quando houver algum problema;</li>
								<li>Seria interessante o nosso sistema ser único para todos os clientes;</li>
								<li>Quando houver muitos usuários utilizando o sistema de leilão, o mesmo alocar mais recursos para poder suportar todos os acessos;</li>
							</ul>
						</li>
					</ul>
				</section>

				<section>
					<h2>Referências</h2>
					<ul>
						<li><a href="https://tsuru.io/">Tsuru</a></li>
						<li><a href="https://www.salesforce.com/saas/">SaaS: Software as a Service</a></li>
						<li><a href="http://searchcloudcomputing.techtarget.com/definition/Infrastructure-as-a-Service-IaaS">Whats is Ifrastructure as a Service (IaaS)</a></li>
						<li><a href="https://www.salesforce.com/paas/overview/">PaaS: Platform as a Service</a></li>
					</ul>

				</section>
			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: false,
				progress: true,
				history: true,
				center: true,
				slideNumber: true,

				transition: 'concave', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
